<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>转：C 有 C 的规则 › 平凡之路</title>
  <meta name="author" content="zhoukuo">
  
  <meta name="description" content="最近在用 C 写程序，规模不小的程序，也谈不上太大，大约一万行之内的模块吧。">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="转：C 有 C 的规则">
  <meta property="og:site_name" content="平凡之路">

  
    <meta property="og:image" content="undefined">
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="平凡之路" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>
</html>

<body>
  <header id="header"><div class="meta inner">
  <h1><a href="/">平凡之路</a></h1>
  <h2><a href="/">生活不止眼前的苟且，还有诗和远方</a></h2>
  <nav id="main-nav">
    <ul>
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about">About</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
</div>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title">转：C 有 C 的规则</h1>
  

      
        <time datetime="2016-07-21T05:45:53.000Z">2016-07-21</time>
      
    </header>
    <div class="entry">
      
        <p>最近在用 C 写程序，规模不小的程序，也谈不上太大，大约一万行之内的模块吧。<a id="more"></a>关于 UI 的基础框架，我知道这个东西连用 C++ 都谈不上合适，更莫谈 C 了。可是我倔强的认为，应该用 C 把它写好。</p>
<p>很多人批评 C++ 没有拥有好的教育体系和方式，导致了很多 C++ 程序员在用 C 的方式写 C++ ，或是把 C++ 当成更好的 C 来用。可是受过 C++ （正确的？）教育熏陶过的程序员呢，当他拿起 C 的时候，是否把 C 当成蹩脚的 C++ 来用呢？</p>
<p>我希望我不是。</p>
<p>了解了更多的语言后，我深信，每种语言有它的游戏规则。C 有 C 的规则，C++ 有 C++ 的规则。用的越深入，越发觉得其间的差别。C++ 不是 C ，C 也不是 C++ 。它们的最大的共通点，是类似的语法，语法类似到可以用一套编译器编译。</p>
<p>C 没有构造函数，没有析构函数。没有虚表，没有继承。const 的使用不那么严格，强制转换不那么忌讳。没有模板，宏是强有力的工具。简单而统一的 ABI ，冗长但是有效的命名规则。</p>
<p>C99 以前，我们甚至不可以任意声名一个变量，这估计是最让 C++ 程序员讨厌的地方，直接违反了设计原则，但同时也让 C 程序员保持了良好且统一的风格：不会让一个函数过长，也会把函数内的模块分开，即使用蹩脚的 do {} while(0);</p>
<p>我曾经认为 C 在某方面比 C++ （运行时）低效，但是长时间用下来，发现正是这些“低效”，让我更小心的使用它，设计更合理的结构。</p>
<p>C 的潜规则里，所有数据结构的最佳默认值是 0 ，这样可以方便的使用 calloc 或者 memset 。数据结构最好是 POD ，最好减少指针的滥用，内存如果可以连续的排放在一起，那么就不惜用一些在 C++ 中看似很糟糕的方案，但这样可以方便的 free ，而且不会忘记析构。</p>
<p>C 做成框架中，最好减少暴露的接口，和 C++ 不同，C++ 可以一组组接口的暴露，而 C 一次只是一个 api ，这成就了无数优秀的 C 库，比 C++ 类库的使用更加便捷。但是也无形提高了设计的难度，只是 C 标准库中，就有那么些不合理的接口设计。</p>
<p>一不小心，我们就会用 C 把整个项目写的很糟糕，但是 C++ 不会，糟糕的项目构架很晚才会发现。而 C ，如果你设计的好，感觉就会很好，稍有不适，就需要重构了。用 C 做项目，如履薄冰。</p>
<p>C 就是那么一如既往的简单，简单的可爱又可恨。我用五年时间，感觉自己学会了 C++ 。但是十五年了，仍旧问自己到底可以用 C 完成多大的项目。<br>&lt;完&gt;</p>
<p>原文地址：<a href="http://blog.codingnow.com/2006/05/c.html" target="_blank" rel="noopener">http://blog.codingnow.com/2006/05/c.html</a></p>

      
    </div>
      
      <footer>
        
        
  
  <div>
    <a href="/tags/c/">c</a>
  </div>

        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>


<section id="comment">
  
</section>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:zhoukuo.github.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">最新文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2019/12/16/PostgreSQL11安装布署指南/">PostgreSQL11安装布署指南</a>
      </li>
    
      <li>
        <a href="/2019/10/24/Gitea——轻量级代码托管解决方案/">Gitea——轻量级代码托管解决方案</a>
      </li>
    
      <li>
        <a href="/2019/10/15/[转]Loki——轻量级的日志聚合系统/">[转]Loki——轻量级的日志聚合系统</a>
      </li>
    
      <li>
        <a href="/2019/09/26/Promethus监控之—进程监控/">Promethus监控之—进程监控</a>
      </li>
    
      <li>
        <a href="/2019/09/10/[转]ELK-集中式日志解决方案/">[转]ELK-集中式日志解决方案</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/c/">c</a><small>8</small></li>
  
    <li><a href="/tags/docker/">docker</a><small>1</small></li>
  
    <li><a href="/tags/git/">git</a><small>2</small></li>
  
    <li><a href="/tags/golang/">golang</a><small>10</small></li>
  
    <li><a href="/tags/hexo/">hexo</a><small>1</small></li>
  
    <li><a href="/tags/linux/">linux</a><small>8</small></li>
  
    <li><a href="/tags/markdown/">markdown</a><small>1</small></li>
  
    <li><a href="/tags/持续交付/">持续交付</a><small>1</small></li>
  
    <li><a href="/tags/数据库/">数据库</a><small>1</small></li>
  
    <li><a href="/tags/文化/">文化</a><small>7</small></li>
  
    <li><a href="/tags/测试/">测试</a><small>3</small></li>
  
    <li><a href="/tags/监控/">监控</a><small>3</small></li>
  
    <li><a href="/tags/设计/">设计</a><small>6</small></li>
  
    <li><a href="/tags/调试/">调试</a><small>2</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/c/" style="font-size: 18.33px;">c</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/git/" style="font-size: 11.67px;">git</a> <a href="/tags/golang/" style="font-size: 20px;">golang</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/linux/" style="font-size: 18.33px;">linux</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/持续交付/" style="font-size: 10px;">持续交付</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/文化/" style="font-size: 16.67px;">文化</a> <a href="/tags/测试/" style="font-size: 13.33px;">测试</a> <a href="/tags/监控/" style="font-size: 13.33px;">监控</a> <a href="/tags/设计/" style="font-size: 15px;">设计</a> <a href="/tags/调试/" style="font-size: 11.67px;">调试</a>
  </div>
</div>


  <div class="widget tag">
  <h3 class="title">链接</h3>
    <ul class="entry">
        
          <li>
            
            	<a href="https://trello.com/" target="_blank" title="Trello">Trello</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.scrumcn.com/" target="_blank" title="Scrum中文网">Scrum中文网</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.processon.com/" target="_blank" title="ProcessOn">ProcessOn</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.golangtc.com/download" target="_blank" title="Go下载">Go下载</a>
            
          </li>
        
          <li>
            
            	<a href="http://godoc.ml/" target="_blank" title="Go手册">Go手册</a>
            
          </li>
        
          <li>
            
            	<a href="https://docs.ruanjiadeng.com/gopl-zh/" target="_blank" title="Go圣经">Go圣经</a>
            
          </li>
        
    </ul>
</div>
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2020 zhoukuo
  
</div>
<div class="clearfix"></div></footer>
  <script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script>



</body>
</html>


<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>Docker 入门 › 平凡之路</title>
  <meta name="author" content="zhoukuo">
  
  <meta name="description" content="Docker是一个开源的应用容器引擎，开发者可以利用Docker打包自己的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化。">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Docker 入门">
  <meta property="og:site_name" content="平凡之路">

  
    <meta property="og:image" content="undefined">
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="平凡之路" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>
</html>

<body>
  <header id="header"><div class="meta inner">
  <h1><a href="/">平凡之路</a></h1>
  <h2><a href="/">生活不止眼前的苟且，还有诗和远方</a></h2>
  <nav id="main-nav">
    <ul>
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about">About</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
</div>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title">Docker 入门</h1>
  

      
        <time datetime="2016-10-22T09:22:45.000Z">2016-10-22</time>
      
    </header>
    <div class="entry">
      
        <p>Docker是一个开源的应用容器引擎，开发者可以利用Docker打包自己的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化。</p>
<a id="more"></a>

<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>容器与管理程序虚拟化有所不同，管理程序虚拟化通过中间层将一台或多台独立的机器虚拟运行于物理硬件之上，而容器则是直接运行在操作系统内核之上的用户空间。容器可以让多个独立的用户空间运行在一台宿主机上。</p>
<p>由于“客居”于操作系统，容器只能运行与底层宿主机相同或相似的操作系统，例如可以在Ubuntu服务器中运行CentOS，但无法在Ubuntu服务器上运行“Windows”。</p>
<p>那么Docker有什么特别之处呢？Docker在虚拟化的容器执行环境中增加了一个应用程序引擎，该引擎的目标就是提供一个轻量、快速的环境，能够运行开发者的程序，并方便高效地将程序从开发者的笔记本部署到测试环境，然后再部署到生产环境。</p>
<p>使用Docker，开发人员只需要关心容器中运行的应用程序，而运维人员只需要关心如何管理容器。Docker设计的目的就是要加强开发人员写代码的开发环境与应用程序要部署的生产环境的一致性，从而降低那种“开发时一切都正常，肯定是运维的问题”的风险。</p>
<p>Docker还鼓励面向服务的架构和微服务架构。Docker推荐单个容器只运行一个应用程序或进程，这样就形成了一个分布式的应用程序模型。</p>
<h2 id="Docker组件"><a href="#Docker组件" class="headerlink" title="Docker组件"></a>Docker组件</h2><p>Docker的核心组件：</p>
<ul>
<li>Docker客户端和服务器</li>
<li>Docker镜像</li>
<li>Registry</li>
<li>Docker容器</li>
</ul>
<h2 id="Docker架构"><a href="#Docker架构" class="headerlink" title="Docker架构"></a>Docker架构</h2><p>Docker是一个CS架构的程序，Docker客户端只需向Docker服务器（守护进程）发出请求，服务器将完成所有工作并返回结果。用户可以在同一台宿主机上运行Docker服务器和客户端，也可以从本地的Docker的客户端连接到运行在另一台宿主机上的远程Docker服务器。</p>
<p><img src="http://images2015.cnblogs.com/blog/438458/201603/438458-20160314192315631-334072513.png" alt="Docker架构"></p>
<h2 id="Docker镜像"><a href="#Docker镜像" class="headerlink" title="Docker镜像"></a>Docker镜像</h2><p>镜像是构建Docker世界的基石，用户基于镜像来运行自己的容器。</p>
<h2 id="Registry"><a href="#Registry" class="headerlink" title="Registry"></a>Registry</h2><p>Docker用Registry来保存用户构建的镜像。Registry分为公共和私有两种，Docker公司运营的公共Registry叫作Docker Hub。用户可以在Docker Hub注册账号，分享保存自己的镜像。</p>
<h2 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h2><p>Docker可以帮用户构建和部署容器，用户只需要把自己的应用程序或服务打包放进容器即可。每个容器都包含一个软件镜像，容器可以被创建、启动、关闭、重启以及销毁。</p>
<h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2><h3 id="安装Docker引擎"><a href="#安装Docker引擎" class="headerlink" title="安装Docker引擎"></a>安装Docker引擎</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># yum -y install docker</span></span><br></pre></td></tr></table></figure>

<h3 id="启动守护进程"><a href="#启动守护进程" class="headerlink" title="启动守护进程"></a>启动守护进程</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># systemctl start docker</span></span><br></pre></td></tr></table></figure>

<h3 id="确保已经就绪"><a href="#确保已经就绪" class="headerlink" title="确保已经就绪"></a>确保已经就绪</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker info</span></span><br></pre></td></tr></table></figure>

<h2 id="创建我们的第一个容器"><a href="#创建我们的第一个容器" class="headerlink" title="创建我们的第一个容器"></a>创建我们的第一个容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker create -t -i centos</span></span><br><span class="line">Unable to find image <span class="string">'centos:latest'</span> locally</span><br><span class="line">Trying to pull repository docker.io/library/centos ... </span><br><span class="line">latest: Pulling from docker.io/library/centos</span><br><span class="line">8d30e94188e7: Pull complete </span><br><span class="line">Digest: sha256:2ae0d2c881c7123870114fb9cc7afabd1e31f9888dac8286884f6cf59373ed9b</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> docker.io/centos:latest</span><br></pre></td></tr></table></figure>

<h2 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker start container_1</span></span><br></pre></td></tr></table></figure>

<h2 id="停止容器"><a href="#停止容器" class="headerlink" title="停止容器"></a>停止容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker stop container_1</span></span><br></pre></td></tr></table></figure>

<h2 id="重启容器"><a href="#重启容器" class="headerlink" title="重启容器"></a>重启容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker restart container_1</span></span><br></pre></td></tr></table></figure>

<h2 id="附着到正在运行的容器"><a href="#附着到正在运行的容器" class="headerlink" title="附着到正在运行的容器"></a>附着到正在运行的容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker attach container_1</span></span><br></pre></td></tr></table></figure>

<h2 id="创建并启动容器"><a href="#创建并启动容器" class="headerlink" title="创建并启动容器"></a>创建并启动容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker run -i -t centos</span></span><br></pre></td></tr></table></figure>

<h2 id="容器命名"><a href="#容器命名" class="headerlink" title="容器命名"></a>容器命名</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker create --name container_1 -i -t centos</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker run --name container_1 -i -t centos</span></span><br></pre></td></tr></table></figure>

<p>docker run = docker create + docker start + docker attach</p>
<h2 id="创建守护进程"><a href="#创建守护进程" class="headerlink" title="创建守护进程"></a>创建守护进程</h2><p>除了这些交互式运行的容器，也可以创建长期运行的容器，</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker run --name daemon_dave -d centos /bin/sh -c "while true; do echo hello world; sleep 1; done"</span></span><br></pre></td></tr></table></figure>

<p>我们在上面的docker run 命令使用了-d参数，因此Docker会将容器放到后台运行。</p>
<h2 id="容器内部都在干些什么"><a href="#容器内部都在干些什么" class="headerlink" title="容器内部都在干些什么"></a>容器内部都在干些什么</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs daemon_dave</span><br></pre></td></tr></table></figure>

<h2 id="查看容器列表"><a href="#查看容器列表" class="headerlink" title="查看容器列表"></a>查看容器列表</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker ps -a</span></span><br></pre></td></tr></table></figure>

<h2 id="查看正在运行的容器"><a href="#查看正在运行的容器" class="headerlink" title="查看正在运行的容器"></a>查看正在运行的容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker ps</span></span><br></pre></td></tr></table></figure>

<h2 id="查看最后一个运行的容器"><a href="#查看最后一个运行的容器" class="headerlink" title="查看最后一个运行的容器"></a>查看最后一个运行的容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker ps -l</span></span><br></pre></td></tr></table></figure>

<h2 id="查看容器内的进程"><a href="#查看容器内的进程" class="headerlink" title="查看容器内的进程"></a>查看容器内的进程</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker top container_1</span></span><br></pre></td></tr></table></figure>

<h2 id="Docker统计信息"><a href="#Docker统计信息" class="headerlink" title="Docker统计信息"></a>Docker统计信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker stats</span></span><br></pre></td></tr></table></figure>

<h2 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker rm container_1</span></span><br></pre></td></tr></table></figure>

<h2 id="删除所有容器"><a href="#删除所有容器" class="headerlink" title="删除所有容器"></a>删除所有容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost zhoukuo]<span class="comment"># docker rm `docker ps -s -q`</span></span><br></pre></td></tr></table></figure>


      
    </div>
      
      <footer>
        
        
  
  <div>
    <a href="/tags/持续交付/">持续交付</a>
  </div>

        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>


<section id="comment">
  
</section>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:zhoukuo.github.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">最新文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2020/08/19/cUrl使用指南/">cUrl使用指南</a>
      </li>
    
      <li>
        <a href="/2019/12/01/JavaScript编码规范/">JavaScript编码规范</a>
      </li>
    
      <li>
        <a href="/2019/12/01/微服务RESTful接口设计规范/">微服务RESTful接口设计规范</a>
      </li>
    
      <li>
        <a href="/2019/11/02/Kong-API配置指南/">Kong-API配置指南(运维视角)</a>
      </li>
    
      <li>
        <a href="/2019/10/31/Kong安装布署指南/">Kong安装布署指南</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/c/">c</a><small>6</small></li>
  
    <li><a href="/tags/golang/">golang</a><small>10</small></li>
  
    <li><a href="/tags/linux/">linux</a><small>6</small></li>
  
    <li><a href="/tags/内容管理/">内容管理</a><small>2</small></li>
  
    <li><a href="/tags/持续交付/">持续交付</a><small>4</small></li>
  
    <li><a href="/tags/数据库/">数据库</a><small>1</small></li>
  
    <li><a href="/tags/文化/">文化</a><small>7</small></li>
  
    <li><a href="/tags/服务网关/">服务网关</a><small>4</small></li>
  
    <li><a href="/tags/测试/">测试</a><small>4</small></li>
  
    <li><a href="/tags/监控/">监控</a><small>3</small></li>
  
    <li><a href="/tags/程序设计/">程序设计</a><small>10</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/c/" style="font-size: 16.67px;">c</a> <a href="/tags/golang/" style="font-size: 20px;">golang</a> <a href="/tags/linux/" style="font-size: 16.67px;">linux</a> <a href="/tags/内容管理/" style="font-size: 11.67px;">内容管理</a> <a href="/tags/持续交付/" style="font-size: 15px;">持续交付</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/文化/" style="font-size: 18.33px;">文化</a> <a href="/tags/服务网关/" style="font-size: 15px;">服务网关</a> <a href="/tags/测试/" style="font-size: 15px;">测试</a> <a href="/tags/监控/" style="font-size: 13.33px;">监控</a> <a href="/tags/程序设计/" style="font-size: 20px;">程序设计</a>
  </div>
</div>


  <div class="widget tag">
  <h3 class="title">链接</h3>
    <ul class="entry">
        
          <li>
            
            	<a href="https://trello.com/" target="_blank" title="Trello">Trello</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.scrumcn.com/" target="_blank" title="Scrum中文网">Scrum中文网</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.processon.com/" target="_blank" title="ProcessOn">ProcessOn</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.golangtc.com/download" target="_blank" title="Go下载">Go下载</a>
            
          </li>
        
          <li>
            
            	<a href="http://godoc.ml/" target="_blank" title="Go手册">Go手册</a>
            
          </li>
        
          <li>
            
            	<a href="https://docs.ruanjiadeng.com/gopl-zh/" target="_blank" title="Go圣经">Go圣经</a>
            
          </li>
        
    </ul>
</div>
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2020 zhoukuo
  
</div>
<div class="clearfix"></div></footer>
  <script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script>



</body>
</html>

